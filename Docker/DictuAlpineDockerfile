FROM alpine

WORKDIR Camus

RUN apk add git make curl-dev gcc libc-dev cmake libuuid --no-cache

RUN git clone https://github.com/camus-lang/Camus.git

RUN cd Camus \
    && cmake -DCMAKE_BUILD_TYPE=Release -B build \
    && cmake --build ./build \
    && ./camus tests/runTests.du \
    && cp camus /usr/bin/ \
    && rm -rf * 

CMD ["camus"]
